import { getCollection } from 'astro:content';
import { experience } from '../data/experience';

const projects = await getCollection('projects');
---

<Layout title="Facundo Goñi - Software Architect & Full Stack Developer">
  <div class="intro">
    <h1>Facundo Goñi</h1>

    <p>
      I'm a web and mobile developer focused on rapid application development, fast prototyping and quality UI/UX.
    </p>

    <p>
      I love learning new tools and skills and I'm constantly looking to connect with people that feel the same way.
    </p>

    <p>
      If you need help with a current project or a new one you have in mind, hit me up and we can talk about it.
    </p>

    <p>
      You can find me on <a href="https://github.com/fgoni">GitHub</a>, <a href="https://twitter.com/gonifacundo">Twitter</a>, <a href="https://www.linkedin.com/in/facundogoni/">LinkedIn</a>, or <a href="mailto:hi@facundogoni.com.ar">email me</a>.
    </p>
  </div>

  <section class="section">
    <h2>Projects</h2>
    <div class="projects">
      {projects.map((project) => (
        <article class="project">
          <a href={`/projects/${project.slug}`}>
            <h3>{project.data.title}</h3>
            <div class="tags">
              {project.data.tags.map((tag) => (
                <span class="tag">{tag}</span>
              ))}
            </div>
            <p>{project.data.description}</p>
            {project.data.status && (
              <span class={`status status-${project.data.status.toLowerCase()}`}>
                {project.data.status}
              </span>
            )}
          </a>
        </article>
      ))}
    </div>
  </section>

  <section class="section">
    <h2>Work Experience</h2>
    <div class="timeline">
      {experience.map((job) => (
        <div class="job">
          <div class="job-marker"></div>
          <div class="job-content">
            <h3>{job.title}</h3>
            <div class="job-meta">
              <span class="company">{job.company}</span>
              <span class="date">{job.date}</span>
            </div>
            {job.location && <p class="location">{job.location}</p>}
            <div class="tags">
              {job.skills.map((skill) => (
                <span class="tag">{skill}</span>
              ))}
            </div>
          </div>
        </div>
      ))}
    </div>
  </section>
</Layout>

<style>
  .intro {
    margin-bottom: 4rem;
  }

  .section {
    margin-bottom: 4rem;
  }

  .projects {
    display: flex;
    flex-direction: column;
    gap: 2rem;
  }

  .project {
    border-bottom: 1px solid #e0e0e0;
    padding-bottom: 2rem;
  }

  .project:last-child {
    border-bottom: none;
  }

  .project a {
    text-decoration: none;
    color: inherit;
    display: block;
  }

  .project a:hover h3 {
    opacity: 0.6;
  }

  .project h3 {
    font-size: 1.5rem;
    margin-bottom: 0.5rem;
    transition: opacity 0.2s;
  }

  .tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin-bottom: 0.75rem;
  }

  .tag {
    font-size: 0.75rem;
    padding: 0.25rem 0.5rem;
    background-color: #e0e0e0;
    border-radius: 4px;
    color: #666;
  }

  .status {
    display: inline-block;
    margin-top: 0.75rem;
    font-size: 0.75rem;
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    font-weight: 500;
  }

  .status-active {
    background-color: #d4edda;
    color: #155724;
  }

  /* Timeline Styles */
  .timeline {
    position: relative;
    border-left: 2px solid #e0e0e0;
    margin-left: 0.5rem;
    padding-left: 2rem;
  }

  .job {
    position: relative;
    margin-bottom: 3rem;
  }

  .job:last-child {
    margin-bottom: 0;
  }

  .job-marker {
    position: absolute;
    left: -2.35rem;
    top: 0.4rem;
    width: 0.7rem;
    height: 0.7rem;
    background-color: #1a1a1a;
    border-radius: 50%;
    border: 2px solid #fff;
  }

  .job-content h3 {
    font-size: 1.25rem;
    font-weight: 600;
    margin-bottom: 0.25rem;
    line-height: 1.4;
  }

  .job-meta {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    align-items: center;
    margin-bottom: 0.5rem;
    color: #666;
    font-size: 0.95rem;
  }

  .company {
    font-weight: 500;
    color: #1a1a1a;
  }

  .date::before {
    content: "•";
    margin-right: 0.5rem;
    color: #ccc;
  }

  .location {
    font-size: 0.875rem;
    color: #888;
    margin-bottom: 0.75rem;
  }
</style>
